<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Songs Analysis</title>
    <link 
        rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous"
    />
</head>
<body>
    <div class="container">
        <div class="jumbotron" text-align="center" style="background-color: #1db954" id="topOfPage">
            <h1 style="color: #ffffff">Spotify Songs Analysis</h1>
            <br>
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #1db954">
                <a class="navbar-brand" style="color: #ffffff">Menu (Project Sections):</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                  <div class="navbar-nav">
                    <a class="nav-item nav-link" style="color: #ffffff" href="#background">Background</a>
                    <a class="nav-item nav-link" style="color: #ffffff" href="#analysis">Analysis</a>
                    <a class="nav-item nav-link" style="color: #ffffff" href="#model">Model</a>
                  </div>
                </div>
              </nav>
        </div>

    </div>

    <div class="container" id="background">
        <h3><u>Project Background</u></h3>
        <p>Spotify provides a Top 200s Chart for various countries on a daily basis, based on users' streams. This analysis focuses on songs from the <b>United States</b> that have ranked in the Top 200s chart, since <b>January 2021 through November 17, 2021</b>.</p>
        <p>Additional information regarding various song features are also available. Some of the features which have been included in this analysis are as follows:</p> 
            <li><b>Acousticness:</b> A confidence measure from 0.0-1.0 of whether a track is acoustic, with 1.0 representing the highest confidence</li>
            <li><b>Danceability:</b> A measure of how suitable a track is for dancing on a scale of 0.0-1.0, with 1.0 representing the most danceable</li>
            <li><b>Duration (ms):</b> Track length in milliseconds</li>
            <li><b>Energy:</b> A measure from 0.0-1.0 of track intensity/activity, with 1.0 representing the most "energetic"</li>
            <li><b>Instrumentalness:</b> A measure from 0.0-1.0 predicting whether a track contains no vocals, with 1.0 representing the greatest likelihood the track contains no vocals</li>
            <li><b>Key:</b> The key the track is in (C, C♯/D♭, D, D♯/E♭, etc.</li>
            <li><b>Mode:</b> Modality (major or minor) of the track</li>
            <li><b>Speechiness:</b> A measure from 0.0-1.0 detecting the presence of spoken words in track, with 1.0 representing the more exclusive speech-like recordings</li>
            <li><b>Tempo:</b> Overall estimated tempo of track in beats per minute (BPM)</li>
            <li><b>Valence:</b> A measure of 0.0-1.0 describing the musical positiveness conveyed by the track, with 1.0 reperesenting the most positive</li>
        <br>
        <p>Stream and ranking position data have been scraped from the Spotify charts, and the corresponding song features data  (as outlined above) has been pulled through the Spotify API request.</p>
        <p>Various insights have been analyzed through this data in the "Exploratory Analysis" section.</p>
        <p>Additionally, a machine learning model has been built to predict whether a song can be predicted to rank within the Top 20 positions of the United States charts, depending on various musical attributes.</p>
        <br>
    </div>

    <div class="container" id="analysis">
        <h3><u>Exploratory Analysis</u></h3>
        <div class="row p-4">
            <div class="card m-auto" style="width: 90%;">
                <div class="card-body">
                    <h4>What songs have accumulated the most streams in 2021 so far?</h4>
                    <p>So far in 2021, Dua Lipa's song, "Levitating (feat. DaBaby)", has amassed the most streams of ~244M.</p>
                    <div id="chart1"></div>
                </div>
            </div>
            <br>
            <div class="card m-auto" style="width: 90%;">
                <div class="card-body">
                    <h4>Which artists have the most songs that have ranked in the Top 200s chart so far in 2021?</h4>
                    <p>Taylor Swift has the most songs on the Top 200s chart so far in 2021, with 86 charted songs.</p>
                    <div id="chart2"></div>
                </div>
            </div>
            <br>
            <div class="card m-auto" style="width: 90%;">
                <div class="card-body">
                    <h4>Which artists have accumulated the most total streams in 2021 so far?</h4>
                    <p>Drake has the most total streams across his charted songs in 2021, with ~1.0B streams.</p>
                    <div id="chart3"></div>
                </div>
            </div>
            <br>
            <div class="card m-auto" style="width: 90%;">
                <div class="card-body">
                    <h4>Which artists have the most #1 hits in 2021 so far?</h4>
                    <p>Drake and J.Cole are tied with the highest number of #1 hits in 2021 so far, with three #1 hits each.</p>
                    <div id="chart4"></div>
                </div>
            </div>
            <br>
        </div>    

        <!-- plotly CDN -->
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script type="text/javascript">
            var graphs1 = {{ graph1JSON | safe }}
            Plotly.plot("chart1", graphs1,{})

            var graphs2 = {{ graph2JSON | safe }}
            Plotly.plot("chart2", graphs2,{})

            var graphs3 = {{ graph3JSON | safe }}
            Plotly.plot("chart3", graphs3,{})

            var graphs4 = {{ graph4JSON | safe }}
            Plotly.plot("chart4", graphs4,{})
        </script>
    </div>
    
    <div class="container" id="model">
        <h3><u>Machine Learning Model</u></h3>
        <p><b>Can we predict whether a song will be able to achieve a rank in the top 20 positions of the Spotify United States Top 200 chart, based on various song attributes/features?</b></p>
        <h4>Song Features/Attributes</h4>
        <form action="/predict" method="POST">
            <label>Danceability (0.0 - 1.0):</label>
            <input type="float" name="danceability">
            <br>
            <label>Energy (0.0 - 1.0):</label>
            <input type="float" name="energy">
            <br>
            <label>Speechiness (0.0 - 1.0):</label>
            <input type="float" name="speechiness">
            <br>
            <label>Acousticness (0.0 - 1.0):</label>
            <input type="float" name="acousticness">
            <br>
            <label>Instrumentalness (0.0 - 1.0):</label>
            <input type="float" name="instrumentalness">
            <br>
            <label>Valence (0.0 - 1.0):</label>
            <input type="float" name="valence">
            <br>
            <label>Tempo (BPM):</label>
            <input type="number" name="tempo">
            <br>
            <label>Key:</label>
            <select name="key_type" id="key_type">
                <option value=0>A</option>
                <option value=1>A♯/B♭</option>
                <option value=2>B</option>
                <option value=3>C</option>
                <option value=4>C♯/D♭</option>
                <option value=5>D</option>
                <option value=6>D♯/E♭</option>
                <option value=7>E</option>
                <option value=8>F</option>
                <option value=9>F♯/G♭</option>
                <option value=10>G</option>
                <option value=11>G♯/A♭</option>
            </select>
            <br>
            <label>Mode (Major/Minor):</label>
            <select name="mode_type" id="mode_type">
                <option value=0>Major</option>
                <option value=1>Minor</option>
            </select>
            <br>
            <input type="submit">
        </form>
    </div>
</body>
</html>
